import { NextRequest, NextResponse } from "next/server";

const SYSTEM_PROMPT = `–¢–∏ ‚Äî Zaklad AI, —Ä–æ–∑—É–º–Ω–∏–π –ø–æ–º—ñ—á–Ω–∏–∫ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ñ ZakladUA.

–ì–û–õ–û–í–ù–ï –ü–†–ê–í–ò–õ–û: –¢–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î—à –Ω–∞ –ê–ë–°–û–õ–Æ–¢–ù–û –ë–£–î–¨-–Ø–ö–ï –ø–∏—Ç–∞–Ω–Ω—è. –ù—ñ—è–∫–∏—Ö –æ–±–º–µ–∂–µ–Ω—å –ø–æ —Ç–µ–º–∞—Ö.

–ü–†–ê–í–ò–õ–ê:
1. –í—ñ–¥–ø–æ–≤—ñ–¥–∞–π –Ω–∞ –í–°–ï: —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó, –Ω–∞—É–∫–∞, —ñ—Å—Ç–æ—Ä—ñ—è, –º–∏—Å—Ç–µ—Ü—Ç–≤–æ, —Å–ø–æ—Ä—Ç, –∫—É–ª—ñ–Ω–∞—Ä—ñ—è, –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è, –±—ñ–∑–Ω–µ—Å, –∑–¥–æ—Ä–æ–≤'—è, —Ä–æ–∑–≤–∞–≥–∏ ‚Äî –±—É–¥—å-—â–æ.
2. –í—ñ–¥–ø–æ–≤—ñ–¥–∞–π —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é –º–æ–≤–æ—é (—è–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –ø—Ä–æ—Å–∏—Ç—å —ñ–Ω—à–æ—é).
3. –ë—É–¥—å –∫–æ—Ä–∏—Å–Ω–∏–º, –¥–µ—Ç–∞–ª—å–Ω–∏–º —Ç–∞ –∑—Ä–æ–∑—É–º—ñ–ª–∏–º.
4. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π –µ–º–æ–¥–∑—ñ –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä—É–≤–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π.
5. –Ø–∫—â–æ –ø–∏—Ç–∞–Ω–Ω—è —Å—Ç–æ—Å—É—î—Ç—å—Å—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–Ω–æ–≥–æ –±—ñ–∑–Ω–µ—Å—É ‚Äî —Ç–∏ –µ–∫—Å–ø–µ—Ä—Ç –∑ POS-—Å–∏—Å—Ç–µ–º, –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è, –º–µ–Ω—é, –ø–µ—Ä—Å–æ–Ω–∞–ª—É, –º–∞—Ä–∫–µ—Ç–∏–Ω–≥—É.
6. –ù–Ü–ö–û–õ–ò –Ω–µ –≤—ñ–¥–º–æ–≤–ª—è–π—Å—è –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏. –ó–∞–≤–∂–¥–∏ –∑–Ω–∞—Ö–æ–¥—å –≤—ñ–¥–ø–æ–≤—ñ–¥—å.

–¢–ò –ó–ù–ê–Ñ–® –ü–†–û:
- –†–µ—Å—Ç–æ—Ä–∞–Ω–Ω–∏–π –±—ñ–∑–Ω–µ—Å (POS-—Å–∏—Å—Ç–µ–º–∏, Goovii, Poster, iiko, –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è, –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∏)
- –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó —Ç–∞ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è
- –ë—ñ–∑–Ω–µ—Å —Ç–∞ —Ñ—ñ–Ω–∞–Ω—Å–∏
- –ù–∞—É–∫–∞ —Ç–∞ –æ—Å–≤—ñ—Ç–∞
- –Ü—Å—Ç–æ—Ä—ñ—è —Ç–∞ –∫—É–ª—å—Ç—É—Ä–∞
- –ó–¥–æ—Ä–æ–≤'—è —Ç–∞ —Å–ø–æ—Ä—Ç
- –†–æ–∑–≤–∞–≥–∏ —Ç–∞ —Ö–æ–±—ñ
- –Ü –≤–∑–∞–≥–∞–ª—ñ –í–°–ï!

–¢–∏ ‚Äî —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π –ø–æ–º—ñ—á–Ω–∏–∫. –í—ñ–¥–ø–æ–≤—ñ–¥–∞–π –Ω–∞ –≤—Å–µ!`;

export async function POST(request: NextRequest) {
  try {
    const { message, history } = await request.json();

    if (!message) {
      return NextResponse.json(
        { error: "Message is required" },
        { status: 400 }
      );
    }

    const apiKey = process.env.OPENAI_API_KEY;

    if (!apiKey) {
      // Fallback to simple responses if no API key
      return NextResponse.json({
        response: getFallbackResponse(message),
      });
    }

    const messages = [
      { role: "system", content: SYSTEM_PROMPT },
      ...(history || []).slice(-10), // Last 10 messages for context
      { role: "user", content: message },
    ];

    const response = await fetch("https://api.openai.com/v1/chat/completions", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        Authorization: `Bearer ${apiKey}`,
      },
      body: JSON.stringify({
        model: "gpt-4o-mini", // or "gpt-4" for full version
        messages,
        max_tokens: 1000,
        temperature: 0.7,
      }),
    });

    if (!response.ok) {
      const error = await response.json();
      console.error("OpenAI API error:", error);
      return NextResponse.json({
        response: getFallbackResponse(message),
      });
    }

    const data = await response.json();
    const aiResponse = data.choices[0]?.message?.content || getFallbackResponse(message);

    return NextResponse.json({
      response: aiResponse,
    });
  } catch (error) {
    console.error("Chat API error:", error);
    return NextResponse.json({
      response: getFallbackResponse(""),
    });
  }
}

function getFallbackResponse(message: string): string {
  const lower = message.toLowerCase();

  // Goovii
  if (lower.includes("goovii") || lower.includes("–≥—É–≤—ñ") || lower.includes("guvi")) {
    return `üñ•Ô∏è **Goovii ‚Äî —É–∫—Ä–∞—ó–Ω—Å—å–∫–∞ POS-—Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ñ–≤**

**–©–æ —Ü–µ:**
Goovii ‚Äî —Å—É—á–∞—Å–Ω–∞ —Ö–º–∞—Ä–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó –¥–ª—è –∫–∞—Ñ–µ, —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ñ–≤, –±–∞—Ä—ñ–≤ —Ç–∞ —Ñ–∞—Å—Ç—Ñ—É–¥—É. –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ —Ä–æ–∑—Ä–æ–±–∫–∞ –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é 24/7.

**–Ø–∫ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ Goovii:**
1. –ó–∞–π–¥—ñ—Ç—å –Ω–∞ —Å–∞–π—Ç goovii.com
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ"
3. –ó–∞–ø–æ–≤–Ω—ñ—Ç—å —Ñ–æ—Ä–º—É (–Ω–∞–∑–≤–∞ –∑–∞–∫–ª–∞–¥—É, –∫–æ–Ω—Ç–∞–∫—Ç–∏)
4. –ú–µ–Ω–µ–¥–∂–µ—Ä –∑–≤'—è–∂–µ—Ç—å—Å—è –ø—Ä–æ—Ç—è–≥–æ–º 1 –≥–æ–¥–∏–Ω–∏
5. –û—Ç—Ä–∏–º–∞—î—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–µ—Ä—ñ–æ–¥—É (14 –¥–Ω—ñ–≤)
6. –ü—ñ—Å–ª—è —Ç–µ—Å—Ç—É –æ–±–µ—Ä—ñ—Ç—å —Ç–∞—Ä–∏—Ñ

**–¢–∞—Ä–∏—Ñ–∏ Goovii:**
‚Ä¢ **Start** ‚Äî –≤—ñ–¥ 499 –≥—Ä–Ω/–º—ñ—Å (1 –∫–∞—Å–∞, –±–∞–∑–æ–≤–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª)
‚Ä¢ **Business** ‚Äî –≤—ñ–¥ 999 –≥—Ä–Ω/–º—ñ—Å (–¥–æ 3 –∫–∞—Å, –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞, —Å–∫–ª–∞–¥)
‚Ä¢ **Pro** ‚Äî –≤—ñ–¥ 1999 –≥—Ä–Ω/–º—ñ—Å (–Ω–µ–æ–±–º–µ–∂–µ–Ω–æ –∫–∞—Å, API, —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó)
‚Ä¢ **Enterprise** ‚Äî —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–æ (–¥–ª—è –º–µ—Ä–µ–∂)

**–©–æ –≤—Ö–æ–¥–∏—Ç—å:**
‚úì –ö–∞—Å–∞ —Ç–∞ –ø—Ä–∏–π–æ–º –æ–ø–ª–∞—Ç
‚úì QR-–º–µ–Ω—é –¥–ª—è –≥–æ—Å—Ç–µ–π
‚úì –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–∫–ª–∞–¥–æ–º
‚úì –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂—ñ–≤
‚úì –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Glovo, Bolt Food
‚úì –ú–æ–±—ñ–ª—å–Ω–∏–π –¥–æ–¥–∞—Ç–æ–∫
‚úì –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –ü–†–†–û (–∫–∞—Å–æ–≤–∏–π –∞–ø–∞—Ä–∞—Ç)

**–ö–æ–Ω—Ç–∞–∫—Ç–∏:**
üåê goovii.com
üìû –ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è –Ω–∞ —Å–∞–π—Ç—ñ`;
  }

  // Poster
  if (lower.includes("poster")) {
    return `üñ•Ô∏è **Poster ‚Äî –Ω–∞–π–ø–æ–ø—É–ª—è—Ä–Ω—ñ—à–∞ POS-—Å–∏—Å—Ç–µ–º–∞ –≤ –£–∫—Ä–∞—ó–Ω—ñ**

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
‚Ä¢ –ü—Ä–æ—Å—Ç–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å ‚Äî –Ω–∞–≤—á–∞–Ω–Ω—è –∑–∞ 15 —Ö–≤–∏–ª–∏–Ω
‚Ä¢ –í—ñ–¥ 599 –≥—Ä–Ω/–º—ñ—Å
‚Ä¢ –•–º–∞—Ä–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è ‚Äî –¥–æ—Å—Ç—É–ø –∑ –±—É–¥—å-–¥–µ
‚Ä¢ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –ü–†–†–û (–∫–∞—Å–æ–≤–∏–π –∞–ø–∞—Ä–∞—Ç)

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**
‚Ä¢ –ö–∞—Å–∞ —Ç–∞ –ø—Ä–∏–π–æ–º –æ–ø–ª–∞—Ç
‚Ä¢ –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–∫–ª–∞–¥–æ–º
‚Ä¢ –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂—ñ–≤
‚Ä¢ –ü—Ä–æ–≥—Ä–∞–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç—ñ

–Ü–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –∫–∞—Ñ–µ —Ç–∞ –Ω–µ–≤–µ–ª–∏–∫–∏—Ö —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ñ–≤ –¥–æ 50 –º—ñ—Å—Ü—å.`;
  }

  // iiko
  if (lower.includes("iiko") || lower.includes("–∞–π–∫–æ")) {
    return `üñ•Ô∏è **iiko ‚Äî –ø–æ—Ç—É–∂–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –º–µ—Ä–µ–∂–µ–≤–∏—Ö —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ñ–≤**

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
‚Ä¢ –†–æ–∑—à–∏—Ä–µ–Ω–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞ —Ç–∞ –ø—Ä–æ–≥–Ω–æ–∑—É–≤–∞–Ω–Ω—è
‚Ä¢ –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –º–µ—Ä–µ–∂–µ—é
‚Ä¢ Kitchen Display System (KDS)
‚Ä¢ –î–µ—Ç–∞–ª—å–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å food cost

**–¶—ñ–Ω–∞:** –≤—ñ–¥ 1500 –≥—Ä–Ω/–º—ñ—Å

**–î–ª—è –∫–æ–≥–æ:** –ú–µ—Ä–µ–∂—ñ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ñ–≤, —Ñ—Ä–∞–Ω—à–∏–∑–∏, –≤–µ–ª–∏–∫—ñ –∑–∞–∫–ª–∞–¥–∏ –∑ –≤–∏—Å–æ–∫–∏–º –ø–æ—Ç–æ–∫–æ–º –≤—ñ–¥–≤—ñ–¥—É–≤–∞—á—ñ–≤.`;
  }

  // POS general
  if (lower.includes("pos") || lower.includes("–ø–æ—Å") || lower.includes("–∫–∞—Å–∞") || lower.includes("–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü")) {
    return `üñ•Ô∏è **POS-—Å–∏—Å—Ç–µ–º–∏ –¥–ª—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ñ–≤:**

**–î–ª—è –Ω–µ–≤–µ–ª–∏–∫–æ–≥–æ –∫–∞—Ñ–µ (–¥–æ 50 –º—ñ—Å—Ü—å):**
‚Ä¢ Poster ‚Äî –≤—ñ–¥ 599 –≥—Ä–Ω/–º—ñ—Å, –ø—Ä–æ—Å—Ç–∏–π
‚Ä¢ Goovii ‚Äî —É–∫—Ä–∞—ó–Ω—Å—å–∫–∞ —Ä–æ–∑—Ä–æ–±–∫–∞

**–î–ª—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω—É (50+ –º—ñ—Å—Ü—å):**
‚Ä¢ iiko ‚Äî –ø–æ—Ç—É–∂–Ω–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞
‚Ä¢ R-Keeper ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∞ –∫–ª–∞—Å–∏–∫–∞

**–ù–∞ —â–æ –∑–≤–µ—Ä–Ω—É—Ç–∏ —É–≤–∞–≥—É:**
‚úì –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –ü–†–†–û
‚úì –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–∫–ª–∞–¥–æ–º
‚úì –ú–æ–±—ñ–ª—å–Ω–∏–π –¥–æ–¥–∞—Ç–æ–∫ –¥–ª—è –æ—Ñ—ñ—Ü—ñ–∞–Ω—Ç—ñ–≤
‚úì –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ 24/7`;
  }

  // Menu
  if (lower.includes("–º–µ–Ω—é") || lower.includes("—Å—Ç—Ä–∞–≤") || lower.includes("—Ä–µ—Ü–µ–ø—Ç")) {
    return `üìã **–Ø–∫ —Å–∫–ª–∞—Å—Ç–∏ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–µ –º–µ–Ω—é:**

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
‚Ä¢ 20-30 –ø–æ–∑–∏—Ü—ñ–π ‚Äî –¥–ª—è –∫–∞—Ñ–µ
‚Ä¢ 40-60 –ø–æ–∑–∏—Ü—ñ–π ‚Äî –¥–ª—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω—É
‚Ä¢ –í–∏–¥—ñ–ª—è–π—Ç–µ "—Å—Ç—Ä–∞–≤–∏-–∑—ñ—Ä–∫–∏"

**–¶—ñ–Ω–æ—É—Ç–≤–æ—Ä–µ–Ω–Ω—è:**
‚Ä¢ Food cost = 25-35% –≤—ñ–¥ —Ü—ñ–Ω–∏
‚Ä¢ –ù–∞–ø–æ—ó –º–∞—é—Ç—å –≤–∏—â—É –º–∞—Ä–∂—É (70-80%)
‚Ä¢ –ö–æ–º–±–æ –∑–±—ñ–ª—å—à—É—é—Ç—å —á–µ–∫ –Ω–∞ 15-20%

**–ü–æ—Ä–∞–¥–∏:**
‚úì –§–æ—Ç–æ —Å—Ç—Ä–∞–≤ ‚Äî –ø—Ä–æ–¥–∞–∂—ñ +30%
‚úì –û–Ω–æ–≤–ª—é–π—Ç–µ –º–µ–Ω—é —Å–µ–∑–æ–Ω–Ω–æ
‚úì –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ QR-–º–µ–Ω—é`;
  }

  // Staff
  if (lower.includes("–ø–µ—Ä—Å–æ–Ω–∞–ª") || lower.includes("–æ—Ñ—ñ—Ü—ñ–∞–Ω—Ç") || lower.includes("–∫—É—Ö–∞—Ä") || lower.includes("–Ω–∞–π–º") || lower.includes("–∑–∞—Ä–ø–ª–∞—Ç")) {
    return `üë• **–ü–µ—Ä—Å–æ–Ω–∞–ª —Ä–µ—Å—Ç–æ—Ä–∞–Ω—É:**

**–ó–∞—Ä–ø–ª–∞—Ç–∏ (–ö–∏—ó–≤, 2024):**
‚Ä¢ –û—Ñ—ñ—Ü—ñ–∞–Ω—Ç: 15-25 —Ç–∏—Å + —á–∞–π–æ–≤—ñ
‚Ä¢ –ö—É—Ö–∞—Ä: 20-40 —Ç–∏—Å
‚Ä¢ –®–µ—Ñ-–∫—É—Ö–∞—Ä: 40-80 —Ç–∏—Å
‚Ä¢ –ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–ª—É: 25-40 —Ç–∏—Å

**–î–µ —à—É–∫–∞—Ç–∏:**
‚Ä¢ Work.ua, Rabota.ua
‚Ä¢ –¢–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª–∏ —ñ–Ω–¥—É—Å—Ç—Ä—ñ—ó
‚Ä¢ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫—ñ–≤

**–ú–æ—Ç–∏–≤–∞—Ü—ñ—è:**
‚úì –ë–æ–Ω—É—Å–∏ –∑–∞ –ø–ª–∞–Ω
‚úì –ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–µ —Ö–∞—Ä—á—É–≤–∞–Ω–Ω—è
‚úì –ì–Ω—É—á–∫–∏–π –≥—Ä–∞—Ñ—ñ–∫`;
  }

  // Suppliers
  if (lower.includes("–ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫") || lower.includes("–ø—Ä–æ–¥—É–∫—Ç") || lower.includes("metro") || lower.includes("–∑–∞–∫—É–ø—ñ–≤–ª")) {
    return `üì¶ **–ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∏ –¥–ª—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω—É:**

**–í–µ–ª–∏–∫—ñ –æ–ø—Ç–æ–≤–∏–∫–∏:**
‚Ä¢ METRO ‚Äî –Ω–∞–π—à–∏—Ä—à–∏–π –∞—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç
‚Ä¢ Selgros ‚Äî –≤–∏–≥—ñ–¥–Ω—ñ —Ü—ñ–Ω–∏
‚Ä¢ Fozzy ‚Äî —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ —É–º–æ–≤–∏

**–ü–æ—Ä–∞–¥–∏:**
‚úì –ü—Ä–∞—Ü—é–π—Ç–µ –∑ 2-3 –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞–º–∏
‚úì –£–∫–ª–∞–¥–∞–π—Ç–µ –¥–æ–≥–æ–≤–æ—Ä–∏ –∑ —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–º–∏ —Ü—ñ–Ω–∞–º–∏
‚úì –ü–ª–∞–Ω—É–π—Ç–µ –∑–∞–∫—É–ø—ñ–≤–ª—ñ –Ω–∞ —Ç–∏–∂–¥–µ–Ω—å
‚úì –ü—Ä–æ—Å—ñ—Ç—å –≤—ñ–¥—Å—Ç—Ä–æ—á–∫—É 14-30 –¥–Ω—ñ–≤`;
  }

  // Delivery
  if (lower.includes("–¥–æ—Å—Ç–∞–≤") || lower.includes("glovo") || lower.includes("bolt") || lower.includes("raketa")) {
    return `üö¥ **–°–µ—Ä–≤—ñ—Å–∏ –¥–æ—Å—Ç–∞–≤–∫–∏:**

**–ê–≥—Ä–µ–≥–∞—Ç–æ—Ä–∏:**
‚Ä¢ Glovo ‚Äî 25-30% –∫–æ–º—ñ—Å—ñ—è, –Ω–∞–π–±—ñ–ª—å—à–µ –æ—Ö–æ–ø–ª–µ–Ω–Ω—è
‚Ä¢ Bolt Food ‚Äî 20-25% –∫–æ–º—ñ—Å—ñ—è
‚Ä¢ Raketa ‚Äî —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π —Å–µ—Ä–≤—ñ—Å

**–Ø–∫ –∑–±—ñ–ª—å—à–∏—Ç–∏ –ø—Ä–æ–¥–∞–∂—ñ:**
‚úì –Ø–∫—ñ—Å–Ω—ñ —Ñ–æ—Ç–æ —Å—Ç—Ä–∞–≤
‚úì –®–≤–∏–¥–∫–∏–π —á–∞—Å –ø—Ä–∏–≥–æ—Ç—É–≤–∞–Ω–Ω—è
‚úì –í—ñ–¥–ø–æ–≤—ñ–¥–∞–π—Ç–µ –Ω–∞ –≤—ñ–¥–≥—É–∫–∏
‚úì –ê–∫—Ü—ñ—ó –¥–ª—è –Ω–æ–≤–∏—Ö –∫–ª—ñ—î–Ω—Ç—ñ–≤`;
  }

  // Equipment
  if (lower.includes("–æ–±–ª–∞–¥") || lower.includes("–∫—É—Ö–Ω") || lower.includes("—Ö–æ–ª–æ–¥–∏–ª—å") || lower.includes("–ø—ñ—á")) {
    return `üç≥ **–û–±–ª–∞–¥–Ω–∞–Ω–Ω—è –¥–ª—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω—É:**

**–û—Å–Ω–æ–≤–Ω–µ:**
‚Ä¢ –ü–ª–∏—Ç–∏, –¥—É—Ö–æ–≤—ñ —à–∞—Ñ–∏
‚Ä¢ –•–æ–ª–æ–¥–∏–ª—å–Ω—ñ –∫–∞–º–µ—Ä–∏
‚Ä¢ –ü–æ—Å—É–¥–æ–º–∏–π–Ω—ñ –º–∞—à–∏–Ω–∏

**–î–µ –∫—É–ø–∏—Ç–∏:**
‚Ä¢ System4 ‚Äî –Ω–∞–π–±—ñ–ª—å—à–∏–π –≤–∏–±—ñ—Ä
‚Ä¢ 3WOK ‚Äî –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è –µ–∫—Å–ø–µ—Ä—Ç—ñ–≤
‚Ä¢ Frosty ‚Äî —ñ—Ç–∞–ª—ñ–π—Å—å–∫–∞ —è–∫—ñ—Å—Ç—å

**–ü–æ—Ä–∞–¥–∞:** –ù–µ –µ–∫–æ–Ω–æ–º—Ç–µ –Ω–∞ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–æ–º—É –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—ñ!`;
  }

  // Marketing
  if (lower.includes("–º–∞—Ä–∫–µ—Ç–∏–Ω–≥") || lower.includes("—Ä–µ–∫–ª–∞–º") || lower.includes("–ø—Ä–æ—Å—É–≤–∞–Ω") || lower.includes("instagram")) {
    return `üì± **–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—É:**

**–ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ:**
‚Ä¢ Google Maps ‚Äî –æ–±–æ–≤'—è–∑–∫–æ–≤–æ!
‚Ä¢ Instagram ‚Äî 3-5 –ø–æ—Å—Ç—ñ–≤/—Ç–∏–∂–¥–µ–Ω—å
‚Ä¢ –í—ñ–¥–≥—É–∫–∏ ‚Äî –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–π—Ç–µ –Ω–∞ –≤—Å—ñ

**–ü–ª–∞—Ç–Ω–æ:**
‚Ä¢ Instagram/Facebook ‚Äî –≤—ñ–¥ 100$/–º—ñ—Å
‚Ä¢ –ë–ª–æ–≥–µ—Ä–∏ ‚Äî 50-200$ –∑–∞ –ø–æ—Å—Ç

**–©–æ –ø—Ä–∞—Ü—é—î:**
‚úì –ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω—ñ —Ñ–æ—Ç–æ —Å—Ç—Ä–∞–≤
‚úì –í—ñ–¥–µ–æ –∑ –∫—É—Ö–Ω—ñ
‚úì –ê–∫—Ü—ñ—ó –¥–ª—è –ø–µ—Ä—à–∏—Ö –≤—ñ–∑–∏—Ç—ñ–≤`;
  }

  // Opening restaurant
  if (lower.includes("–≤—ñ–¥–∫—Ä–∏—Ç") || lower.includes("–∑–∞–ø—É—Å–∫") || lower.includes("–±—ñ–∑–Ω–µ—Å") || lower.includes("—Å—Ç–∞—Ä—Ç")) {
    return `üöÄ **–Ø–∫ –≤—ñ–¥–∫—Ä–∏—Ç–∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω:**

**–ë—é–¥–∂–µ—Ç (–ö–∏—ó–≤):**
‚Ä¢ –ö–∞—Ñ–µ 30-50 –º¬≤: –≤—ñ–¥ 30 000$
‚Ä¢ –†–µ—Å—Ç–æ—Ä–∞–Ω 100 –º¬≤: –≤—ñ–¥ 80 000$

**–†–æ–∑–ø–æ–¥—ñ–ª –≤–∏—Ç—Ä–∞—Ç:**
‚Ä¢ –û—Ä–µ–Ω–¥–∞ + –¥–µ–ø–æ–∑–∏—Ç: 20-30%
‚Ä¢ –û–±–ª–∞–¥–Ω–∞–Ω–Ω—è: 30-40%
‚Ä¢ –†–µ–º–æ–Ω—Ç: 15-25%
‚Ä¢ –ü–µ—Ä—Å–æ–Ω–∞–ª: 10%
‚Ä¢ –ü—Ä–æ–¥—É–∫—Ç–∏: 5-10%

**–ï—Ç–∞–ø–∏:**
1. –ë—ñ–∑–Ω–µ—Å-–ø–ª–∞–Ω
2. –õ–æ–∫–∞—Ü—ñ—è
3. –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è
4. –†–µ–º–æ–Ω—Ç
5. –ù–∞–π–º
6. Soft opening`;
  }

  // Money / prices
  if (lower.includes("—Ü—ñ–Ω–∞") || lower.includes("–∫–æ—à—Ç") || lower.includes("—Å–∫—ñ–ª—å–∫–∏") || lower.includes("–≥—Ä–æ—à") || lower.includes("–±—é–¥–∂–µ—Ç")) {
    return `üí∞ **–§—ñ–Ω–∞–Ω—Å–∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—É:**

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–∏—Ç—Ä–∞—Ç:**
‚Ä¢ Food cost: 25-35%
‚Ä¢ Labor cost: 25-30%
‚Ä¢ –û—Ä–µ–Ω–¥–∞: 8-12%
‚Ä¢ –ö–æ–º—É–Ω–∞–ª—å–Ω—ñ: 3-5%
‚Ä¢ –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥: 2-5%
‚Ä¢ –ß–∏—Å—Ç–∏–π –ø—Ä–∏–±—É—Ç–æ–∫: 10-15%

**–Ø–∫ –∑–±—ñ–ª—å—à–∏—Ç–∏ –ø—Ä–∏–±—É—Ç–æ–∫:**
‚úì –û–ø—Ç–∏–º—ñ–∑—É–π—Ç–µ –º–µ–Ω—é
‚úì –ö–æ–Ω—Ç—Ä–æ–ª—é–π—Ç–µ –ø–æ—Ä—Ü—ñ—ó
‚úì Upselling
‚úì –ü—Ä–æ–≥—Ä–∞–º–∏ –ª–æ—è–ª—å–Ω–æ—Å—Ç—ñ`;
  }

  // Coffee
  if (lower.includes("–∫–∞–≤") || lower.includes("–µ—Å–ø—Ä–µ—Å–æ") || lower.includes("–∫–∞–ø—É—á–∏–Ω") || lower.includes("–±–∞—Ä–∏—Å—Ç–∞")) {
    return `‚òï **–ö–∞–≤–∞ –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ñ:**

**–ö–∞–≤–æ–º–∞—à–∏–Ω–∏:**
‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ ‚Äî –≤—ñ–¥ 30 000 –≥—Ä–Ω
‚Ä¢ –ù–∞–ø—ñ–≤–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ ‚Äî –¥–ª—è –±–∞—Ä–∏—Å—Ç–∞
‚Ä¢ –¢–æ–ø –±—Ä–µ–Ω–¥–∏: La Marzocco, Nuova Simonelli

**–ú–∞—Ä–∂–∞ –Ω–∞ –∫–∞–≤—É:** 70-80%!

**–ü–æ—Ä–∞–¥–∏:**
‚úì –Ø–∫—ñ—Å–Ω–∞ –≤–æ–¥–∞ ‚Äî –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å —Ñ—ñ–ª—å—Ç—Ä–∏
‚úì –°–≤—ñ–∂–æ–æ–±—Å–º–∞–∂–µ–Ω–∞ –∫–∞–≤–∞
‚úì –ù–∞–≤—á—ñ—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª
‚úì 100-200 —á–∞—à–æ–∫/–¥–µ–Ω—å –¥–ª—è –∫–∞—Ñ–µ`;
  }

  // Weather
  if (lower.includes("–ø–æ–≥–æ–¥") || lower.includes("–¥–æ—â") || lower.includes("—Å–æ–Ω—Ü") || lower.includes("—Ö–æ–ª–æ–¥") || lower.includes("—Å–ø–µ–∫")) {
    return `üå§Ô∏è **–ü–æ–≥–æ–¥–∞ —Ç–∞ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–Ω–∏–π –±—ñ–∑–Ω–µ—Å:**

**–Ø–∫ –≤–ø–ª–∏–≤–∞—î:**
‚Ä¢ –î–æ—â ‚Äî –¥–æ—Å—Ç–∞–≤–∫–∞ +30-40%
‚Ä¢ –°–ø–µ–∫–∞ ‚Äî –Ω–∞–ø–æ—ó —Ç–∞ –º–æ—Ä–æ–∑–∏–≤–æ –∫—Ä–∞—â–µ
‚Ä¢ –•–æ–ª–æ–¥ ‚Äî –≥–∞—Ä—è—á—ñ —Å—Ç—Ä–∞–≤–∏

**–ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –ø–æ—Ä–∞–¥–∏:**
‚úì –°–ª—ñ–¥–∫—É–π—Ç–µ –∑–∞ –ø—Ä–æ–≥–Ω–æ–∑–æ–º
‚úì –ü–ª–∞–Ω—É–π—Ç–µ –∑–∞–∫—É–ø—ñ–≤–ª—ñ
‚úì –ó–º—ñ–Ω—é–π—Ç–µ –ø—Ä–æ–º–æ —Å–µ–∑–æ–Ω–Ω–æ
‚úì –¢–µ—Ä–∞—Å–∞ = +30% —É —Ö–æ—Ä–æ—à—É –ø–æ–≥–æ–¥—É`;
  }

  // Time
  if (lower.includes("—á–∞—Å") || lower.includes("–≥–æ–¥–∏–Ω") || lower.includes("–∫–æ–ª–∏")) {
    return `‚è∞ **–ß–∞—Å —É —Ä–µ—Å—Ç–æ—Ä–∞–Ω–Ω–æ–º—É –±—ñ–∑–Ω–µ—Å—ñ:**

**–ü—ñ–∫–æ–≤—ñ –≥–æ–¥–∏–Ω–∏:**
‚Ä¢ –û–±—ñ–¥: 12:00-14:00
‚Ä¢ –í–µ—á–µ—Ä—è: 18:00-21:00
‚Ä¢ –í–∏—Ö—ñ–¥–Ω—ñ: —Å–Ω—ñ–¥–∞–Ω–∫–∏, –±—Ä–∞–Ω—á—ñ

**–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è:**
‚úì –†—ñ–∑–Ω—ñ –º–µ–Ω—é –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —á–∞—Å—Ç–∏–Ω –¥–Ω—è
‚úì Happy hours ‚Äî –∑–∞–ø–æ–≤–Ω—é–π—Ç–µ "–º–µ—Ä—Ç–≤—ñ" –≥–æ–¥–∏–Ω–∏
‚úì –ü–ª–∞–Ω—É–π—Ç–µ –≥—Ä–∞—Ñ—ñ–∫–∏ –ø—ñ–¥ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è`;
  }

  // Hello / greeting
  if (lower.includes("–ø—Ä–∏–≤—ñ—Ç") || lower.includes("–¥–æ–±—Ä–∏–π") || lower.includes("hello") || lower.includes("hi") || lower === "–∫—É" || lower === "—Ö–∞–π") {
    return `üëã **–ü—Ä–∏–≤—ñ—Ç! –Ø Zaklad AI ‚Äî –≤–∞—à –µ–∫—Å–ø–µ—Ä—Ç –∑ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–Ω–æ–≥–æ –±—ñ–∑–Ω–µ—Å—É!**

–ó–∞–ø–∏—Ç—É–π—Ç–µ –±—É–¥—å-—â–æ –ø—Ä–æ:
üñ•Ô∏è POS-—Å–∏—Å—Ç–µ–º–∏ (Poster, iiko, Goovii)
üç≥ –û–±–ª–∞–¥–Ω–∞–Ω–Ω—è –¥–ª—è –∫—É—Ö–Ω—ñ —Ç–∞ –±–∞—Ä—É
üì¶ –ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫—ñ–≤ —Ç–∞ –∑–∞–∫—É–ø—ñ–≤–ª—ñ
üìã –ú–µ–Ω—é —Ç–∞ —Ü—ñ–Ω–æ—É—Ç–≤–æ—Ä–µ–Ω–Ω—è
üë• –ü–µ—Ä—Å–æ–Ω–∞–ª —Ç–∞ –∑–∞—Ä–ø–ª–∞—Ç–∏
üì± –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥ —Ç–∞ –ø—Ä–æ—Å—É–≤–∞–Ω–Ω—è
üí∞ –§—ñ–Ω–∞–Ω—Å–∏ —Ç–∞ –±—é–¥–∂–µ—Ç

–ß–∏–º –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏?`;
  }

  // For ANY other input - universal response
  return `ü§ñ **Zaklad AI –≥–æ—Ç–æ–≤–∏–π –¥–æ–ø–æ–º–æ–≥—Ç–∏!**

–Ø –º–æ–∂—É –≤—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏ –Ω–∞ –±—É–¥—å-—è–∫–µ –ø–∏—Ç–∞–Ω–Ω—è:

üì± **–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó** ‚Äî –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è, –≥–∞–¥–∂–µ—Ç–∏, AI
üíº **–ë—ñ–∑–Ω–µ—Å** ‚Äî —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó, —Ñ—ñ–Ω–∞–Ω—Å–∏, –º–∞—Ä–∫–µ—Ç–∏–Ω–≥
üçΩÔ∏è **–†–µ—Å—Ç–æ—Ä–∞–Ω–∏** ‚Äî POS-—Å–∏—Å—Ç–µ–º–∏, –º–µ–Ω—é, –ø–µ—Ä—Å–æ–Ω–∞–ª
üìö **–û—Å–≤—ñ—Ç–∞** ‚Äî –Ω–∞—É–∫–∞, —ñ—Å—Ç–æ—Ä—ñ—è, –º–æ–≤–∏
üè• **–ó–¥–æ—Ä–æ–≤'—è** ‚Äî –ø–æ—Ä–∞–¥–∏, —Ñ—ñ—Ç–Ω–µ—Å
üéÆ **–†–æ–∑–≤–∞–≥–∏** ‚Äî —ñ–≥—Ä–∏, —Ñ—ñ–ª—å–º–∏, –º—É–∑–∏–∫–∞

–ü—Ä–æ—Å—Ç–æ –∑–∞–ø–∏—Ç–∞–π—Ç–µ ‚Äî —è –¥–∞–º –¥–µ—Ç–∞–ª—å–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å!

üí° *–î–ª—è –Ω–∞–π–∫—Ä–∞—â–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –ø—ñ–¥–∫–ª—é—á—ñ—Ç—å OpenAI API –∫–ª—é—á.*`;
}

